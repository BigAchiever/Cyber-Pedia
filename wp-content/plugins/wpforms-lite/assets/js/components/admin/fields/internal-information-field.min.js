"use strict";var WPFormsInternalInformationField=window.WPFormsInternalInformationField||function(s){let e,f={init:function(){s(f.ready)},ready:function(){e=s("#wpforms-builder"),f.bindUIActionsFields()},bindUIActionsFields:function(){WPFormsBuilder.fieldDragDisable(s(".internal-information-not-draggable"),!1),e.on("input",'.wpforms-field-option-row-heading input[type="text"]',f.headingUpdates).on("input",".wpforms-field-option-row-expanded-description textarea",f.expandedDescriptionUpdates).on("input",'.wpforms-field-option-row-cta-label input[type="text"]',f.ctaButtonLabelUpdates).on("input",'.wpforms-field-option-row-cta-link input[type="text"]',f.ctaButtonLinkUpdates).on("click",".cta-button.cta-expand-description a",f.showExpandedDescription).on("focusout",'.wpforms-field-option-row-cta-link input[type="text"]',f.validateCTAlinkField).on("mousedown",".wpforms-field-internal-information-checkbox",f.handleCheckboxClick).on("wpformsDescriptionFieldUpdated",f.descriptionFieldUpdated).on("wpformsBeforeFieldDeleteAlert",f.preventDeleteFieldAlert).on("mouseenter",".internal-information-not-editable .wpforms-field-delete",f.showDismissTitle)},saveInternalInformationCheckbox:function(e,t){s.post(wpforms_builder.ajax_url,{action:"wpforms_builder_save_internal_information_checkbox",formId:s("#wpforms-builder-form").data("id"),name:e,checked:t,nonce:wpforms_builder.nonce})},replaceCheckboxes:function(e){var t;let n="";for(t of e.split(/\r?\n/).filter(e=>e))t.startsWith("[] ")?(t=t.replaceAll("[] ",'<div class="wpforms-field-internal-information-checkbox-wrap"><div class="wpforms-field-internal-information-checkbox-input"><input type="checkbox" name="" value="1" class="wpforms-internal-field-checkbox" disabled /></div><div class="wpforms-field-internal-information-checkbox-label">'),t+="</div></div>",n+=t):n+="<p>"+t+"</p>";return n},headingUpdates:function(){let e=s(this),t=wpf.sanitizeHTML(e.val()),n=s("#wpforms-field-"+e.parent().data("field-id")).find(".wpforms-field-internal-information-row-heading .heading");n.toggle(0!==t.length),WPFormsBuilder.updateDescription(n.find(".text"),t)},expandedDescriptionUpdates:function(){const e=s(this),t=wpf.sanitizeHTML(e.val()),n=e.parent().data("field-id"),i=s("#wpforms-field-"+n),o=i.find(".internal-information-wrap"),a=i.find(".wpforms-field-internal-information-row-cta-button"),r=s("#wpforms-field-option-"+n),l=r.find('.wpforms-field-option-row-cta-link input[type="text"]').val(),d=0!==r.find('.wpforms-field-option-row-cta-label input[type="text"]').val().length?r.find('.wpforms-field-option-row-cta-label input[type="text"]').val():wpforms_builder.empty_label;var p=f.replaceCheckboxes(t);WPFormsBuilder.updateDescription(o.find(".expanded-description"),p),0===t.length&&o.find(".expanded-description").parent().hide().removeClass("expanded"),0!==t.length?a.html(f.notExpandedButton()):0===t.length&&0===l.length?a.html(""):a.html(f.standardCtaButton(l,d))},showExpandedDescription:function(e){e.preventDefault();const t=s(this),n=t.closest(".wpforms-field-internal-information").data("field-id"),i=t.closest(".internal-information-content").find(".wpforms-field-internal-information-row-expanded-description"),o=s("#wpforms-field-"+n).find(".wpforms-field-internal-information-row-cta-button"),a=i.hasClass("expanded");i.toggleClass("expanded"),a?(i.slideUp(400),o.html(f.notExpandedButton())):(i.slideDown(400),o.html(f.expandedButton()))},validateCTAlinkField:function(){const e=s(this),t=e.val().trim();e.val(t),""===t||wpf.isURL(t)||s.confirm({title:wpforms_builder.heads_up,content:wpforms_builder.iif_redirect_url_field_error,icon:"fa fa-exclamation-circle",type:"orange",buttons:{confirm:{text:wpforms_builder.ok,btnClass:"btn-confirm",keys:["enter"],action:function(){e.focus()}}}})},handleCheckboxClick:function(e){e.preventDefault();const t=s(this),n=!t.prop("checked");t.prop("checked",n),f.saveInternalInformationCheckbox(t.prop("name"),Number(n))},descriptionFieldUpdated:function(e,t){"internal-information"===s("#wpforms-field-"+t.id).data("field-type")&&0!==t.value.length&&(t.value=f.replaceCheckboxes(t.value),WPFormsBuilder.updateDescription(t.descField,t.value))},preventDeleteFieldAlert:function(e,t,n){"internal-information"===n&&(e.preventDefault(),WPFormsBuilder.fieldDeleteById(t.id,n,50))},showDismissTitle:function(){s(this).attr("title",wpforms_builder.iif_dismiss)},ctaButtonLinkUpdates(){let e=s(this),t=e.parent().data("field-id"),n=s("#wpforms-field-"+t),i=n.find(".wpforms-field-internal-information-row-cta-button"),o=n.find(".wpforms-field-internal-information-row-expanded-description"),a=e.closest("#wpforms-field-option-"+t).find(".wpforms-field-option-row-expanded-description textarea").val(),r=e.closest("#wpforms-field-option-"+t).find('.wpforms-field-option-row-cta-label input[type="text"]').val();if(0!==a.length)return o.hasClass("expanded")?void i.html(f.expandedButton()):void i.html(f.notExpandedButton());wpf.isURL(e.val())&&0!==r.length?i.html(f.standardCtaButton(e.val(),r)):i.html("")},ctaButtonLabelUpdates:function(){let e=s(this),t=wpf.sanitizeHTML(e.val()),n=e.parent().data("field-id"),i=s("#wpforms-field-"+n),o=i.find(".wpforms-field-internal-information-row-cta-button"),a=i.find(".wpforms-field-internal-information-row-expanded-description"),r=e.closest("#wpforms-field-option-"+n).find(".wpforms-field-option-row-expanded-description textarea").val(),l=e.closest("#wpforms-field-option-"+n).find('.wpforms-field-option-row-cta-link input[type="text"]').val();if(0!==r.length&&0!==t.length)return a.hasClass("expanded")?void o.html(f.expandedButton()):void o.html(f.notExpandedButton());0!==t.length&&wpf.isURL(l)?o.html(f.standardCtaButton(l,t)):0===r.length&&o.html("")},standardCtaButton:function(e,t){let n=`<div class="cta-button cta-link-external ">
				<a href="%url%" target="_blank" rel="noopener noreferrer">
					<span class="button-label">%label%</span>
				</a></div>`;return n.replace("%url%",wpf.sanitizeHTML(e)).replace("%label%",wpf.sanitizeHTML(t))},notExpandedButton:function(){let e=`<div class="cta-button cta-expand-description not-expanded">
				<a href="#" target="_blank" rel="noopener noreferrer">
					<span class="button-label">%label%</span>
					<span class="icon not-expanded">
						<svg viewBox="0 0 10 7">
							<path d="M4.91016 5.90234C5.15625 6.14844 5.56641 6.14844 5.8125 5.90234L9.53125 2.18359C9.80469 1.91016 9.80469 1.5 9.53125 1.25391L8.92969 0.625C8.65625 0.378906 8.24609 0.378906 8 0.625L5.34766 3.27734L2.72266 0.625C2.47656 0.378906 2.06641 0.378906 1.79297 0.625L1.19141 1.25391C0.917969 1.5 0.917969 1.91016 1.19141 2.18359L4.91016 5.90234Z"></path>
							<path d="M4.91016 5.90234C5.15625 6.14844 5.56641 6.14844 5.8125 5.90234L9.53125 2.18359C9.80469 1.91016 9.80469 1.5 9.53125 1.25391L8.92969 0.625C8.65625 0.378906 8.24609 0.378906 8 0.625L5.34766 3.27734L2.72266 0.625C2.47656 0.378906 2.06641 0.378906 1.79297 0.625L1.19141 1.25391C0.917969 1.5 0.917969 1.91016 1.19141 2.18359L4.91016 5.90234Z"></path>
						</svg>
					</span>
				</a></div>`;return e.replace("%label%",wpforms_builder.iif_more)},expandedButton:function(){let e=`<div class="cta-button cta-expand-description expanded">
				<a href="#" target="_blank" rel="noopener noreferrer">
					<span class="button-label">%label%</span>
					<span class="icon expanded">
						<svg viewBox="0 0 10 7">
							<path d="M5.83984 0.625C5.56641 0.378906 5.15625 0.378906 4.91016 0.625L1.19141 4.34375C0.917969 4.61719 0.917969 5.02734 1.19141 5.27344L1.79297 5.90234C2.06641 6.14844 2.47656 6.14844 2.72266 5.90234L5.375 3.25L8 5.90234C8.24609 6.14844 8.68359 6.14844 8.92969 5.90234L9.55859 5.27344C9.80469 5.02734 9.80469 4.61719 9.55859 4.34375L5.83984 0.625Z" fill="red"></path>
						</svg>
					</span>
				</a></div>`;return e.replace("%label%",wpforms_builder.close)}};return f}((document,window,jQuery));WPFormsInternalInformationField.init();